<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><style type="text/css">.OH_CodeSnippetContainerTabLeftActive, .OH_CodeSnippetContainerTabLeft,.OH_CodeSnippetContainerTabLeftDisabled { }.OH_CodeSnippetContainerTabRightActive, .OH_CodeSnippetContainerTabRight,.OH_CodeSnippetContainerTabRightDisabled { }.OH_footer { }</style><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ContainerOptions.RegisterResolveInterceptor Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="RegisterResolveInterceptor method" /><meta name="System.Keywords" content="ContainerOptions.RegisterResolveInterceptor method" /><meta name="Microsoft.Help.F1" content="SimpleInjector.ContainerOptions.RegisterResolveInterceptor" /><meta name="Microsoft.Help.Id" content="M:SimpleInjector.ContainerOptions.RegisterResolveInterceptor(SimpleInjector.ResolveInterceptor,System.Predicate{SimpleInjector.Advanced.InitializationContext})" /><meta name="Description" content="Registers an delegate that allows intercepting calls to GetInstance and ." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="SimpleInjector" /><meta name="file" content="M_SimpleInjector_ContainerOptions_RegisterResolveInterceptor" /><meta name="guid" content="M_SimpleInjector_ContainerOptions_RegisterResolveInterceptor" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="OH_outerDiv"><div class="OH_outerContent"><table class="TitleTable"><tr><td class="OH_tdTitleColumn"><h1>ContainerOptions<span id="LSTE203AE3_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_0?cpp=::|nu=.");</script>RegisterResolveInterceptor Method </h1></td><td class="OH_tdRunningTitleColumn">Simple Injector</td></tr></table><div id="mainSection"><div id="mainBody"><span class="introStyle"></span> <div class="summary">
            Registers an <a href="T_SimpleInjector_ResolveInterceptor.htm">ResolveInterceptor</a> delegate that allows intercepting calls to
            <a href="M_SimpleInjector_Container_GetInstance.htm">GetInstance</a> and 
            <a href="M_SimpleInjector_InstanceProducer_GetInstance.htm">GetInstance<span id="LSTE203AE3_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_1?cs=()|vb=|cpp=()|nu=()|fs=()");</script></a>.
            </div><p> </p>
    <strong>Namespace:</strong> 
   <a href="N_SimpleInjector.htm">SimpleInjector</a><br />
    <strong>Assembly:</strong>
   SimpleInjector (in SimpleInjector.dll) Version: 4.6.0<div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Syntax</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><div class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs"><div class="OH_CodeSnippetContainerTabLeft" id="ID0ECCA_tabimgleft"> </div><div id="ID0ECCA_tab1" class="OH_CodeSnippetContainerTabFirst"><a href="#" onclick="javascript:ChangeTab('ID0ECCA','cs','1','3');return false;">C#</a></div><div id="ID0ECCA_tab2" class="OH_CodeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0ECCA','vb','2','3');return false;">VB</a></div><div id="ID0ECCA_tab3" class="OH_CodeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0ECCA','asp','3','3');return false;">ASP.NET</a></div><div class="OH_CodeSnippetContainerTabRight" id="ID0ECCA_tabimgright"> </div></div><div class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0ECCA_copyCode" href="#" class="OH_copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0ECCA');return false;" title="Copy">Copy</a></div></div><div id="ID0ECCA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">void</span> <span class="identifier">RegisterResolveInterceptor</span>(
	<span class="identifier">ResolveInterceptor</span> <span class="parameter">interceptor</span>,
	<span class="identifier">Predicate</span>&lt;<span class="identifier">InitializationContext</span>&gt; <span class="parameter">predicate</span>
)</pre></div><div id="ID0ECCA_code_Div2" class="OH_CodeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">Sub</span> <span class="identifier">RegisterResolveInterceptor</span> ( 
	<span class="parameter">interceptor</span> <span class="keyword">As</span> <span class="identifier">ResolveInterceptor</span>,
	<span class="parameter">predicate</span> <span class="keyword">As</span> <span class="identifier">Predicate</span>(<span class="keyword">Of</span> <span class="identifier">InitializationContext</span>)
)</pre></div><div id="ID0ECCA_code_Div3" class="OH_CodeSnippetContainerCode" style="display: none"><pre xml:space="preserve" /></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0ECCA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">interceptor</span></dt><dd>Type: <a href="T_SimpleInjector_ResolveInterceptor.htm">SimpleInjector<span id="LSTE203AE3_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>ResolveInterceptor</a><br />The <a href="T_SimpleInjector_ResolveInterceptor.htm">ResolveInterceptor</a> delegate to register.</dd><dt><span class="parameter">predicate</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/bfcke1bz" target="_blank">System<span id="LSTE203AE3_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Predicate</a><span id="LSTE203AE3_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_4?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><a href="T_SimpleInjector_Advanced_InitializationContext.htm">InitializationContext</a><span id="LSTE203AE3_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_5?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><br />The predicate that will be used to check whether the given delegate must
            be applied to a registration or not. The given predicate will be called once for each registration
            in the container.</dd></dl><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Exceptions</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><div class="tableSection"><table><tr><th class="ps_exceptionNameColumn">Exception</th><th class="ps_exceptionConditionColumn">Condition</th></tr><tr><td><a href="http://msdn2.microsoft.com/en-us/library/27426hcy" target="_blank">ArgumentNullException</a></td><td>
            Thrown when either the <span class="parameter">interceptor</span> or <span class="parameter">predicate</span> are 
            null references.
            </td></tr><tr><td><a href="http://msdn2.microsoft.com/en-us/library/2asft85a" target="_blank">InvalidOperationException</a></td><td>
            Thrown when this container instance is locked and can not be altered.
            </td></tr></table></div><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Remarks</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div>
            If multiple registered <a href="T_SimpleInjector_ResolveInterceptor.htm">ResolveInterceptor</a> instances must be applied, they will be
            applied/wrapped in the order of registration, i.e. the first registered interceptor will call the 
            original instance producer delegate, the second interceptor will call the first interceptor, etc. 
            The last registered interceptor will become the outermost method in the chain and will be called 
            first.
            <div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Examples</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div>
            The following example shows the usage of the <span class="selflink">RegisterResolveInterceptor(ResolveInterceptor, Predicate<span id="LSTE203AE3_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_6?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>InitializationContext<span id="LSTE203AE3_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE203AE3_7?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>)</span> method:
            <div class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs"><div class="OH_CodeSnippetContainerTabLeftActive" id="ID0EAAABA_tabimgleft"> </div><div id="ID0EAAABA_tab1" class="OH_CodeSnippetContainerTabSolo">C#</div><div class="OH_CodeSnippetContainerTabRightActive" id="ID0EAAABA_tabimgright"> </div></div><div class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EAAABA_copyCode" href="#" class="OH_copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> container = <span class="highlight-keyword">new</span> Container();

container.Options.RegisterResolveInterceptor((context, producer) =&gt;
    {
        <span class="highlight-keyword">object</span> instance = producer.Invoke();
        Console.WriteLine(instance.GetType().Name + <span class="highlight-literal">" resolved for "</span> + context.Producer.ServiceType.Name);
        <span class="highlight-keyword">return</span> instance;
    },
    context =&gt; context.Producer.ServiceType.Name.EndsWith(<span class="highlight-literal">"Controller"</span>));

container.Register&lt;IHomeViewModel, HomeViewModel&gt;();
container.Register&lt;IUserRepository, SqlUserRepository&gt;();

<span class="highlight-comment">// This line will write "HomeViewModel resolved for IHomeViewModel" to the console.</span>
container.GetInstance&lt;IHomeViewModel&gt;();</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABA");</script><div class="OH_CollapsibleAreaRegion" id="seeAlsoSection"><div class="OH_regiontitle">See Also</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_SimpleInjector_ContainerOptions.htm">ContainerOptions Class</a></div><div class="seeAlsoStyle"><a href="N_SimpleInjector.htm">SimpleInjector Namespace</a></div></div></div></div></div><div id="OH_footer" class="OH_footer"><p>Copyright (c) 2010 - 2015 Simple Injector Contributors</p> </div></body></html>